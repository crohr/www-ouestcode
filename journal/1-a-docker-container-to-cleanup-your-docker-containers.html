<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>OuestCode - Ruby / Rails / DevOps Consulting</title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
  </head>
  <body class="journal">
    <div class="container">
      <div class="header">
        <div class="brand">
          <a href="/"><img src="/img/logo.svg" class="logo"/></a>
        </div>
        <div class="menu">
          <a href="/products" class="products">Products</a>
	  <a href="/consulting" class="consulting">Consulting</a>
	  <a href="/journal" class="journal">Journal</a>
	  <a href="/about" class="about">About</a>
        </div>
      </div>
    </div>
    <div class="container">
      <div class="content">

<h1 id="a-docker-container-to-cleanup-your-docker-containers">A docker container to cleanup your docker containers</h1>
<p>If you don&#39;t use the <code>--rm</code> flag when launching docker containers (and even if you do), your disks are going to slowly but surely fill up with all the cached layers and unused images. People usually schedule <a href="https://github.com/chadoe/docker-cleanup-volumes">docker-cleanup-volumes</a> in a cron to counter this, but now you can also just run a docker image that does it for you:</p><pre><code class="lang-bash">docker run \
  -d \
  --restart=on-failure \
  -e KEEP_IMAGES=&quot;ubuntu:14.04 corp/important-image:tag&quot; \
  -v /var/run/docker.sock:/var/run/docker.sock:rw \
  -v /var/lib/docker:/var/lib/docker:rw \
  meltwater/docker-cleanup:latest
</code></pre>
<p>See the <a href="https://github.com/meltwater/docker-cleanup">relevant repo</a> for more details and a systemd init script.</p>      </div>
    </div>
    <div class="container">
      <div class="footer">
	<hr/>
	<p>
	  <a href="mailto:contact@ouestcode.com">contact@ouestcode.com</a>
	  -
          <a href="tel:+33633858332">+33 (0)6 33 85 83 32</a>
	  <br>
          OuestCode, Cyril Rohr EIRL, Thorign√©-Fouillard, France
	</p>
      </div>
    </div>
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-13023229-1']);
    _gaq.push(['_setDomainName', 'crohr.me']);
    _gaq.push(['_trackPageview']);
    setTimeout("_gaq.push(['_trackEvent', '20_seconds', 'read'])", 15000);
    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
  </body>
</html>
